import{_ as e}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as i,o as s,d as a}from"./app-B5m7CcSj.js";const t={},n=a(`<h2 id="创建索引" tabindex="-1"><a class="header-anchor" href="#创建索引"><span>创建索引</span></a></h2><p>就像索引在<a href="https://www.mysql.com" target="_blank" rel="noopener noreferrer">MySQL</a>中所起的作用一样，<a href="https://neo4j.com/" target="_blank" rel="noopener noreferrer">Neo4j</a>也可以给<code>节点</code>添加索引。</p><p><a href="https://neo4j.com/" target="_blank" rel="noopener noreferrer">Neo4j</a>中有两种索引。</p><ul><li><p><code>普通索引</code>：使用<code>CREATE INDEX ON :User(name)</code>创建，给<code>定节</code>点中的某个属性添加索引。</p></li><li><p><code>唯一约束</code>：使用<code>CREATE CONSTRAINT INDEX ON (u:User) ASSERT u.id IS UNIQUE</code>创建，和<a href="https://www.mysql.com" target="_blank" rel="noopener noreferrer">MySQL</a>主键的唯一约束作用一样。</p></li></ul><p>当某个属性值是唯一的，就应该使用<code>唯一约束</code>而不是<code>普通索引</code>，因为<code>唯一约束</code>的性能更高。</p><br><h2 id="导入数据" tabindex="-1"><a class="header-anchor" href="#导入数据"><span>导入数据</span></a></h2><p>当有大量的数据需要输入到<a href="https://neo4j.com/" target="_blank" rel="noopener noreferrer">Neo4j</a>里面去的时候，就不能像之前那样去手写一大堆的<code>merge</code>命令了，而是需要一个批量导入的方式，快速地将数据弄进去。</p><p>可以通过两种方式导入数据。</p><ul><li><p><a href="https://neo4j.com/docs/operations-manual/current/tools/neo4j-admin/neo4j-admin-import/#import-tool-full" target="_blank" rel="noopener noreferrer">full import</a>：批量导入。</p></li><li><p><a href="https://neo4j.com/docs/cypher-manual/current/clauses/load-csv/" target="_blank" rel="noopener noreferrer">load csv</a>：一次导入一个文件，可以是<code>csv</code>或<code>log</code>类型的文件。</p></li></ul><p>导入数据前需要先将文件上传到<code>\${NEO4J_HOME}/import</code>目录中去，之后导入命令才能正确执行。</p><p>然后最好是针对数据的关键字段创建索引后再执行导入。</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"># 在Web界面中创建索引</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt; create constraint on (</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">u:User</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) assert u.uid is unique;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"># 在Web界面中导入（前面要加 :auto）</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt; :auto LOAD CSV FROM </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;https://data.neo4j.com/bands/artists.csv&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> AS row</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">MERGE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (a:Artist </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">{name:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> row[1],</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> year:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> toInteger</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">row[2]</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">}</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">RETURN</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> a.name,</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> a.year</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="https://tianmazuo.com/technology/middleware/neo4j/neo4j-14.png" alt="在Web界面中导入的结果" tabindex="0" loading="lazy"><figcaption>在Web界面中导入的结果</figcaption></figure><p>也可以在命令行中执行导入。</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt; cd /home/work/neo4j-community-5.23.0</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt; ./bin/cypher-shell -a neo4j://172.16.185.176:7687 -u root -p 12345678</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"># 进入Cypher查询界面（注意：下面这些语句必须一起执行）</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">neo4j</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt; </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">LOAD</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> CSV</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> FROM</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;https://data.neo4j.com/bands/artists.csv&#39;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> AS</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> row</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">       MERGE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (a:Artist </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">{name:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> row[1],</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> year:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> toInteger</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">row[2]</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">}</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">       RETURN</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> a.name,</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> a.year</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="https://tianmazuo.com/technology/middleware/neo4j/neo4j-15.png" alt="在命令行中的导入结果" tabindex="0" loading="lazy"><figcaption>在命令行中的导入结果</figcaption></figure><p>在浏览器中也可以看到导入结果。</p><figure><img src="https://tianmazuo.com/technology/middleware/neo4j/neo4j-16.png" alt="在命令行中的导入结果" tabindex="0" loading="lazy"><figcaption>在命令行中的导入结果</figcaption></figure>`,19),l=[n];function r(o,h){return s(),i("div",null,l)}const c=e(t,[["render",r],["__file","inim.html.vue"]]),k=JSON.parse('{"path":"/technology/middleware/neo4j/inim.html","title":"索引与导入","lang":"zh-CN","frontmatter":{"title":"索引与导入","icon":"users-line","category":["中间件","Neo4j"],"tag":["中间件","Neo4j","节点","关系","索引"],"date":"2023-02-14T00:00:00.000Z","isOriginal":true,"star":true,"description":"创建索引 就像索引在MySQL中所起的作用一样，Neo4j也可以给节点添加索引。 Neo4j中有两种索引。 普通索引：使用CREATE INDEX ON :User(name)创建，给定节点中的某个属性添加索引。 唯一约束：使用CREATE CONSTRAINT INDEX ON (u:User) ASSERT u.id IS UNIQUE创建，和My...","head":[["meta",{"property":"og:url","content":"https://vuepress-theme-hope-docs-demo.netlify.app/technology/middleware/neo4j/inim.html"}],["meta",{"property":"og:site_name","content":"添码座"}],["meta",{"property":"og:title","content":"索引与导入"}],["meta",{"property":"og:description","content":"创建索引 就像索引在MySQL中所起的作用一样，Neo4j也可以给节点添加索引。 Neo4j中有两种索引。 普通索引：使用CREATE INDEX ON :User(name)创建，给定节点中的某个属性添加索引。 唯一约束：使用CREATE CONSTRAINT INDEX ON (u:User) ASSERT u.id IS UNIQUE创建，和My..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:image","content":"https://tianmazuo.com/technology/middleware/neo4j/neo4j-14.png"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"article:author","content":"添码座"}],["meta",{"property":"article:tag","content":"中间件"}],["meta",{"property":"article:tag","content":"Neo4j"}],["meta",{"property":"article:tag","content":"节点"}],["meta",{"property":"article:tag","content":"关系"}],["meta",{"property":"article:tag","content":"索引"}],["meta",{"property":"article:published_time","content":"2023-02-14T00:00:00.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"索引与导入\\",\\"image\\":[\\"https://tianmazuo.com/technology/middleware/neo4j/neo4j-14.png\\",\\"https://tianmazuo.com/technology/middleware/neo4j/neo4j-15.png\\",\\"https://tianmazuo.com/technology/middleware/neo4j/neo4j-16.png\\"],\\"datePublished\\":\\"2023-02-14T00:00:00.000Z\\",\\"dateModified\\":null,\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"添码座\\",\\"url\\":\\"https://www.tianmazuo.com/about/\\"}]}"]]},"headers":[{"level":2,"title":"创建索引","slug":"创建索引","link":"#创建索引","children":[]},{"level":2,"title":"导入数据","slug":"导入数据","link":"#导入数据","children":[]}],"git":{},"readingTime":{"minutes":1.74,"words":521},"filePathRelative":"technology/middleware/neo4j/inim.md","localizedDate":"2023年2月14日","excerpt":"<h2>创建索引</h2>\\n<p>就像索引在<a href=\\"https://www.mysql.com\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\">MySQL</a>中所起的作用一样，<a href=\\"https://neo4j.com/\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\">Neo4j</a>也可以给<code>节点</code>添加索引。</p>\\n<p><a href=\\"https://neo4j.com/\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\">Neo4j</a>中有两种索引。</p>","autoDesc":true}');export{c as comp,k as data};
