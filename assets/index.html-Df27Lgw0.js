import{_ as t}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as i,o as s,d as e}from"./app-B5m7CcSj.js";const a={},l=e(`<h2 id="nacos能做什么" tabindex="-1"><a class="header-anchor" href="#nacos能做什么"><span>Nacos能做什么</span></a></h2><figure><img src="https://tianmazuo.com/technology/microservice/java/microservice-nacos-01.png" alt="服务配置中心" tabindex="0" loading="lazy"><figcaption>服务配置中心</figcaption></figure><figure><img src="https://tianmazuo.com/technology/microservice/java/microservice-nacos-02.png" alt="服务注册与发现" tabindex="0" loading="lazy"><figcaption>服务注册与发现</figcaption></figure><br><h2 id="配置功能对比" tabindex="-1"><a class="header-anchor" href="#配置功能对比"><span>配置功能对比</span></a></h2><table><thead><tr><th style="text-align:left;"></th><th style="text-align:left;">Spring Cloud Config</th><th style="text-align:left;">Apollo</th><th style="text-align:left;">Nacos</th></tr></thead><tbody><tr><td style="text-align:left;">实时推送</td><td style="text-align:left;">支持（Spring Cloud Bus）</td><td style="text-align:left;">支持（HTTP长轮询1s内）</td><td style="text-align:left;">支持（HTTP长轮询1s内）</td></tr><tr><td style="text-align:left;">版本管理</td><td style="text-align:left;">支持</td><td style="text-align:left;">支持</td><td style="text-align:left;">支持</td></tr><tr><td style="text-align:left;">配置回滚</td><td style="text-align:left;">支持</td><td style="text-align:left;">支持</td><td style="text-align:left;">支持</td></tr><tr><td style="text-align:left;">灰度发布</td><td style="text-align:left;">支持</td><td style="text-align:left;">支持</td><td style="text-align:left;">不支持</td></tr><tr><td style="text-align:left;">权限管理</td><td style="text-align:left;">支持</td><td style="text-align:left;">支持</td><td style="text-align:left;">不支持</td></tr><tr><td style="text-align:left;">多集群</td><td style="text-align:left;">支持</td><td style="text-align:left;">支持</td><td style="text-align:left;">支持</td></tr><tr><td style="text-align:left;">多环境</td><td style="text-align:left;">支持</td><td style="text-align:left;">支持</td><td style="text-align:left;">支持</td></tr><tr><td style="text-align:left;">监听查询</td><td style="text-align:left;">支持</td><td style="text-align:left;">支持</td><td style="text-align:left;">支持</td></tr><tr><td style="text-align:left;">多语言</td><td style="text-align:left;">只支持Java</td><td style="text-align:left;">支持主流语言，提供Open API</td><td style="text-align:left;">支持主流语言，提供Open API</td></tr><tr><td style="text-align:left;">配置格式校验</td><td style="text-align:left;">不支持</td><td style="text-align:left;">支持</td><td style="text-align:left;">支持</td></tr></tbody></table><br><h2 id="服务注册与发现功能对比" tabindex="-1"><a class="header-anchor" href="#服务注册与发现功能对比"><span>服务注册与发现功能对比</span></a></h2><table><thead><tr><th style="text-align:left;"></th><th style="text-align:left;">Nacos</th><th style="text-align:left;">Zookeeper</th><th style="text-align:left;">Consul</th><th style="text-align:left;">Etcd</th><th style="text-align:left;">Eureka</th></tr></thead><tbody><tr><td style="text-align:left;">服务发现</td><td style="text-align:left;">客户端通过DNS或HTTP API发现服务及其位置</td><td style="text-align:left;">客户端订阅znodes的变化</td><td style="text-align:left;">客户端通过DNS或HTTP API发现服务及其位置</td><td style="text-align:left;">客户端可以订阅键或键范围的变化</td><td style="text-align:left;">客户端通过DNS或HTTP API发现服务及其位置</td></tr><tr><td style="text-align:left;">健康检查</td><td style="text-align:left;">提供</td><td style="text-align:left;">不直接提供</td><td style="text-align:left;">提供</td><td style="text-align:left;">不直接提供</td><td style="text-align:left;">提供</td></tr><tr><td style="text-align:left;">键值存储</td><td style="text-align:left;">分布式</td><td style="text-align:left;">分布式、强一致性</td><td style="text-align:left;">分布式</td><td style="text-align:left;">分布式、强一致性</td><td style="text-align:left;">分布式</td></tr><tr><td style="text-align:left;">观察机制</td><td style="text-align:left;">订阅键或键范围的变化</td><td style="text-align:left;">订阅znodes的变化</td><td style="text-align:left;">订阅键或键范围的变化</td><td style="text-align:left;">订阅键或键范围的变化</td><td style="text-align:left;">订阅键或键范围的变化</td></tr><tr><td style="text-align:left;">事务</td><td style="text-align:left;">支持多键事务</td><td style="text-align:left;">通过编程实现</td><td style="text-align:left;">通过编程实现</td><td style="text-align:left;">支持多键事务</td><td style="text-align:left;">通过编程实现</td></tr><tr><td style="text-align:left;">租约</td><td style="text-align:left;">支持</td><td style="text-align:left;">通过编程实现</td><td style="text-align:left;">支持</td><td style="text-align:left;">支持</td><td style="text-align:left;">通过编程实现</td></tr><tr><td style="text-align:left;">访问控制</td><td style="text-align:left;">基于角色</td><td style="text-align:left;">基于角色</td><td style="text-align:left;">基于角色</td><td style="text-align:left;">基于角色</td><td style="text-align:left;">基于角色</td></tr></tbody></table><br><h2 id="集成-开发" tabindex="-1"><a class="header-anchor" href="#集成-开发"><span>集成&amp;开发</span></a></h2><p><a href="https://nacos.io/" target="_blank" rel="noopener noreferrer">Nacos</a>的安装配置比较简单，按照<a href="https://nacos.io/zh-cn/docs/quick-start.html" target="_blank" rel="noopener noreferrer">官方的说明</a>一步步来，使用默认的<code>8848</code>端口就行。</p><p>至于使用的时候，主要是有几个地方需要知道。</p><ul><li><p>网上很多资料说<a href="https://spring.io/projects/spring-cloud" target="_blank" rel="noopener noreferrer">Spring Cloud</a>无法识别<code>bootstrap.yml</code>，我这里是加入<code>spring-cloud-starter-bootstrap</code>依赖就行了，其他地方没做任何设置。</p></li><li><p>当使用<code>默认命名空间（public）</code>和<code>默认Data Id</code>时，<a href="https://nacos.io/" target="_blank" rel="noopener noreferrer">Nacos</a>配置文件的命名规则是<code>应用名-配置环境-文件后缀名</code>的组合，也就是<code>\${spring.application.name}</code>-<code>\${spring.profile.active}</code>-<code>\${spring.cloud.nacos.config.file-extension}</code>，例如，<code>funcun-payment-center-dev.yaml</code>（前面的<code>funcun-payment-center</code>就是<code>应用名</code>）。</p></li></ul><div class="language-yaml line-numbers-mode" data-highlighter="shiki" data-ext="yaml" data-title="yaml" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">spring</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">  profiles</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    active</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">dev</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">  application</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">funcun-payment-center</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">  cloud</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    nacos</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">      discovery</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        # nacos服务注册与发现地址</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">        server-addr</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">localhost:8848</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">      config</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        # nacos服务配置中心地址</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">        server-addr</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">localhost:8848</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">        file-extension</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">yaml</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>开发和测试的时候可以使用默认的<code>命名空间</code>配置，但在生产环境中建议明确使用指定的<code>命名空间</code>和<code>Data Id</code>。</li></ul><div class="language-yaml line-numbers-mode" data-highlighter="shiki" data-ext="yaml" data-title="yaml" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">spring</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">  profiles</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    active</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">dev</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">  application</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">funcun-payment-center</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">  cloud</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    nacos</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">      discovery</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        # nacos服务注册与发现地址</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">        server-addr</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">localhost:8848</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">      config</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        # nacos服务配置中心地址</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">        server-addr</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">localhost:8848</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">        file-extension</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">yaml</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        # 自定义namespace</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">        namespace</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">5dcba23c-cce4-4a2c-b682-bcb216777ef8</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        # 自定义dataid</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">        dataid</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">funcun-payment-center.yaml</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>此时默认的配置文件<code>funcun-payment-center-dev.yaml</code>将不再起作用，应用会读取<code>5dcba23c-cce4-4a2c-b682-bcb216777ef8（命名空间）</code>中<code>funcun-payment-center.yaml（Data Id）</code>的内容。</p>`,18),n=[l];function d(r,h){return s(),i("div",null,n)}const o=t(a,[["render",d],["__file","index.html.vue"]]),g=JSON.parse('{"path":"/technology/microservice/java/","title":"配置中心：Nacos","lang":"zh-CN","frontmatter":{"title":"配置中心：Nacos","icon":"pen-fancy","category":["微服务","Java"],"tag":["微服务","Java","Nacos"],"date":"2023-07-11T00:00:00.000Z","isOriginal":true,"star":true,"description":"Nacos能做什么 服务配置中心服务配置中心 服务注册与发现服务注册与发现 配置功能对比 服务注册与发现功能对比 集成&开发 Nacos的安装配置比较简单，按照官方的说明一步步来，使用默认的8848端口就行。 至于使用的时候，主要是有几个地方需要知道。 网上很多资料说Spring Cloud无法识别bootstrap.yml，我这里是加入spring-...","head":[["meta",{"property":"og:url","content":"https://vuepress-theme-hope-docs-demo.netlify.app/technology/microservice/java/"}],["meta",{"property":"og:site_name","content":"添码座"}],["meta",{"property":"og:title","content":"配置中心：Nacos"}],["meta",{"property":"og:description","content":"Nacos能做什么 服务配置中心服务配置中心 服务注册与发现服务注册与发现 配置功能对比 服务注册与发现功能对比 集成&开发 Nacos的安装配置比较简单，按照官方的说明一步步来，使用默认的8848端口就行。 至于使用的时候，主要是有几个地方需要知道。 网上很多资料说Spring Cloud无法识别bootstrap.yml，我这里是加入spring-..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:image","content":"https://tianmazuo.com/technology/microservice/java/microservice-nacos-01.png"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"article:author","content":"添码座"}],["meta",{"property":"article:tag","content":"微服务"}],["meta",{"property":"article:tag","content":"Java"}],["meta",{"property":"article:tag","content":"Nacos"}],["meta",{"property":"article:published_time","content":"2023-07-11T00:00:00.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"配置中心：Nacos\\",\\"image\\":[\\"https://tianmazuo.com/technology/microservice/java/microservice-nacos-01.png\\",\\"https://tianmazuo.com/technology/microservice/java/microservice-nacos-02.png\\"],\\"datePublished\\":\\"2023-07-11T00:00:00.000Z\\",\\"dateModified\\":null,\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"添码座\\",\\"url\\":\\"https://www.tianmazuo.com/about/\\"}]}"]]},"headers":[{"level":2,"title":"Nacos能做什么","slug":"nacos能做什么","link":"#nacos能做什么","children":[]},{"level":2,"title":"配置功能对比","slug":"配置功能对比","link":"#配置功能对比","children":[]},{"level":2,"title":"服务注册与发现功能对比","slug":"服务注册与发现功能对比","link":"#服务注册与发现功能对比","children":[]},{"level":2,"title":"集成&开发","slug":"集成-开发","link":"#集成-开发","children":[]}],"git":{},"readingTime":{"minutes":2.78,"words":833},"filePathRelative":"technology/microservice/java/README.md","localizedDate":"2023年7月11日","excerpt":"<h2>Nacos能做什么</h2>\\n<figure><img src=\\"https://tianmazuo.com/technology/microservice/java/microservice-nacos-01.png\\" alt=\\"服务配置中心\\" tabindex=\\"0\\" loading=\\"lazy\\"><figcaption>服务配置中心</figcaption></figure>\\n<figure><img src=\\"https://tianmazuo.com/technology/microservice/java/microservice-nacos-02.png\\" alt=\\"服务注册与发现\\" tabindex=\\"0\\" loading=\\"lazy\\"><figcaption>服务注册与发现</figcaption></figure>","autoDesc":true}');export{o as comp,g as data};
