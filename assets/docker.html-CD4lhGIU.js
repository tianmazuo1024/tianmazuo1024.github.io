import{_ as s}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as n,o as i,d as a}from"./app-CiwSPZKD.js";const e={},l=a(`<p>安装好<a href="https://www.docker.com/" target="_blank" rel="noopener noreferrer">Docker</a>，然后执行下面的脚本。</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"># 默认配置</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt; docker run -d -p 6379:6379 redis:latest redis-server</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"># 自定义配置</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt; docker run -d -p 6379:6379 </span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">\\</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">  --name</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> redis</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> \\</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  -v</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /home/work/volumes/redis/redis.conf:/etc/redis.conf</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> \\</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  -v</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /home/work/volumes/redis/data:/data</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> \\</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  --privileged=true</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> \\</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  redis:latest</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> redis-server</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /etc/redis.conf</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>在指定文件夹下新建<code>redis.conf</code>配置文件，内容如下。</p><div class="language-txt line-numbers-mode" data-highlighter="shiki" data-ext="txt" data-title="txt" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span># 持久化保存策略配置</span></span>
<span class="line"><span># 在900s内，如果至少有1个key进行了修改，就进行持久化操作</span></span>
<span class="line"><span>save 900 1</span></span>
<span class="line"><span># 在300s内，如果至少有10个key进行了修改，就进行持久化操作</span></span>
<span class="line"><span>save 300 10</span></span>
<span class="line"><span># 在60s内，如果至少有10000个key进行了修改，就进行持久化操作</span></span>
<span class="line"><span>save 60 10000</span></span>
<span class="line"><span># 配置如果持久化出错，Redis是否禁止写入命令 yes:禁止写入命令，no:允许写入命令（存在数据丢失风险）</span></span>
<span class="line"><span>stop-writes-on-bgsave-error yes</span></span>
<span class="line"><span># 配置是否压缩rdb文件。[开启(yes)的话，会消耗一定的cpu资源]</span></span>
<span class="line"><span>rdbcompression yes</span></span>
<span class="line"><span># 保存rdb文件的时候，进行错误的检查校验</span></span>
<span class="line"><span>rdbchecksum yes</span></span>
<span class="line"><span># 默认持久化保存后的文件名</span></span>
<span class="line"><span>dbfilename dump.rdb</span></span>
<span class="line"><span># rdb文件保存的目录</span></span>
<span class="line"><span>dir ./</span></span>
<span class="line"><span># 关闭保护模式</span></span>
<span class="line"><span>protected-mode no</span></span>
<span class="line"><span># 设置访问、登录的密码，设置requirepass 您的密码</span></span>
<span class="line"><span>requirepass 123456</span></span>
<span class="line"><span># 是否开启aof持久化模式，默认值：no,不开启。redis的默认持久化策略是edb模式</span></span>
<span class="line"><span>appendonly no</span></span>
<span class="line"><span># 持久化文件名称</span></span>
<span class="line"><span>appendfilename &quot;appendonly.aof&quot;</span></span>
<span class="line"><span># 持久化策略设置</span></span>
<span class="line"><span># appendfsync always # 每次修改都进行持久化操作</span></span>
<span class="line"><span>appendfsync everysec # 每秒执行一次持久化操作</span></span>
<span class="line"><span># appendfsync no     # 不执行持久化操作，相当于未开启aof持久化策略</span></span>
<span class="line"><span># 设置为yes表示rewrite期间对新写操作不fsync，暂时存在内存中，等rewrite完成后再写入，默认为no，建议yes</span></span>
<span class="line"><span>no-appendfsync-on-rewrite no</span></span>
<span class="line"><span># AOF自动重写配置，默认值为100</span></span>
<span class="line"><span>auto-aof-rewrite-percentage 100</span></span>
<span class="line"><span>auto-aof-rewrite-min-size 64mb</span></span>
<span class="line"><span># Redis在以AOF方式恢复数据时，对最后一条可能出问题的指令的处理方式，默认值yes</span></span>
<span class="line"><span>aof-load-truncated yes</span></span>
<span class="line"><span># 当重写AOF文件时，Redis能够在AOF文件中使用RDB前导码，以便更快地重写和恢复，启用此选项时，重写的AOF文件由两个不同的节组成：[RDB file][AOF tail]，当加载AOF文件时，Redis通过以 “REDIS” 字符串开头的AOF文件识别出此文件是由RDB和AOF组合而成的，Redis会先加载RDB部分，然后再加载AOF部分，默认值yes</span></span>
<span class="line"><span>aof-use-rdb-preamble yes</span></span>
<span class="line"><span># 设置客户端最大连接数，该配置一般无需修改，使用默认值即可</span></span>
<span class="line"><span># maxclients 10000</span></span>
<span class="line"><span># redis配置的最大内存容量</span></span>
<span class="line"><span># maxmemory &lt;bytes&gt;</span></span>
<span class="line"><span># 到达内存容量限制之后的处理策略</span></span>
<span class="line"><span># maxmemory-policy noeviction</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,4),p=[l];function t(r,d){return i(),n("div",null,p)}const o=s(e,[["render",t],["__file","docker.html.vue"]]),k=JSON.parse('{"path":"/technology/middleware/redis/docker.html","title":"Docker部署Redis","lang":"zh-CN","frontmatter":{"title":"Docker部署Redis","icon":"key","category":["中间件","Redis"],"tag":["中间件","Redis","Docker"],"date":"2023-01-11T00:00:00.000Z","isOriginal":true,"star":true,"description":"安装好Docker，然后执行下面的脚本。 在指定文件夹下新建redis.conf配置文件，内容如下。","head":[["meta",{"property":"og:url","content":"https://vuepress-theme-hope-docs-demo.netlify.app/technology/middleware/redis/docker.html"}],["meta",{"property":"og:site_name","content":"添码座"}],["meta",{"property":"og:title","content":"Docker部署Redis"}],["meta",{"property":"og:description","content":"安装好Docker，然后执行下面的脚本。 在指定文件夹下新建redis.conf配置文件，内容如下。"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"article:author","content":"添码座"}],["meta",{"property":"article:tag","content":"中间件"}],["meta",{"property":"article:tag","content":"Redis"}],["meta",{"property":"article:tag","content":"Docker"}],["meta",{"property":"article:published_time","content":"2023-01-11T00:00:00.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Docker部署Redis\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2023-01-11T00:00:00.000Z\\",\\"dateModified\\":null,\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"添码座\\",\\"url\\":\\"https://www.tianmazuo.com/about/\\"}]}"]]},"headers":[],"git":{},"readingTime":{"minutes":2.36,"words":708},"filePathRelative":"technology/middleware/redis/docker.md","localizedDate":"2023年1月11日","excerpt":"<p>安装好<a href=\\"https://www.docker.com/\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\">Docker</a>，然后执行下面的脚本。</p>\\n<div class=\\"language-shell line-numbers-mode\\" data-highlighter=\\"shiki\\" data-ext=\\"shell\\" data-title=\\"shell\\" style=\\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\\"><pre class=\\"shiki shiki-themes one-light one-dark-pro vp-code\\"><code><span class=\\"line\\"><span style=\\"--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic\\"># 默认配置</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\\">&gt; docker run -d -p 6379:6379 redis:latest redis-server</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic\\"># 自定义配置</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\\">&gt; docker run -d -p 6379:6379 </span><span style=\\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\\">\\\\</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\\">  --name</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\"> redis</span><span style=\\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\\"> \\\\</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#986801;--shiki-dark:#D19A66\\">  -v</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\"> /home/work/volumes/redis/redis.conf:/etc/redis.conf</span><span style=\\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\\"> \\\\</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#986801;--shiki-dark:#D19A66\\">  -v</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\"> /home/work/volumes/redis/data:/data</span><span style=\\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\\"> \\\\</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#986801;--shiki-dark:#D19A66\\">  --privileged=true</span><span style=\\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\\"> \\\\</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\">  redis:latest</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\"> redis-server</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\"> /etc/redis.conf</span></span></code></pre>\\n<div class=\\"line-numbers\\" aria-hidden=\\"true\\" style=\\"counter-reset:line-number 0\\"><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div></div></div>","autoDesc":true}');export{o as comp,k as data};
