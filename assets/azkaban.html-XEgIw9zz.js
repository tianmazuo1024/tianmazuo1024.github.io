import{_ as a}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as i,o as e,d as s}from"./app-CiwSPZKD.js";const n={},t=s(`<h2 id="编译安装" tabindex="-1"><a class="header-anchor" href="#编译安装"><span>编译安装</span></a></h2><p><a href="https://azkaban.github.io/" target="_blank" rel="noopener noreferrer">Azkaban</a>是<a href="https://www.linkedin.com/" target="_blank" rel="noopener noreferrer">Linkedin</a>开源的轻量级批量任务流调度器（和它类似的还有<a href="https://oozie.apache.org/" target="_blank" rel="noopener noreferrer">Oozie</a>，但它是重量级的）。</p><p>可以在这个地址<a href="https://github.com/azkaban/azkaban/tags" target="_blank" rel="noopener noreferrer">https://github.com/azkaban/azkaban/tags</a>下载它。</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt; wget https://github.com/azkaban/azkaban/archive/refs/tags/4.0.0.tar.gz</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt; mv 4.0.0.tar.gz azkaban-4.0.0.tar.gz</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt; tar -zxvf azkaban-4.0.0.tar.gz</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt; cd azkaban-4.0.0</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>然后再按照<a href="https://azkaban.readthedocs.io/en/latest/getStarted.html#installing-the-solo-server" target="_blank" rel="noopener noreferrer">官网的示例</a>开始单机模式的编译安装。</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt; ./gradlew build installDist</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">......</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>编译完成后，会在当前目录下产生一个名称为<code>azkaban-solo-server</code>的目录。</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt; cd azkaban-solo-server/build/install/azkaban-solo-server</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"># 更改时区</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt; vi conf/azkaban.properties</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"># 更改 default.timezone.id=America/Los_Angeles 部分</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">default.timezone.id</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">=Asia/Shanghai</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"># 启动azkaban</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt; ./bin/azkaban-solo-start.sh</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><a href="https://azkaban.github.io/" target="_blank" rel="noopener noreferrer">Azkaban</a>启动后，默认会监听<code>8081</code>端口。</p><figure><img src="https://tianmazuo.com/technology/middleware/azkaban-01.png" alt="Azkaban首页" tabindex="0" loading="lazy"><figcaption>Azkaban首页</figcaption></figure><br><h2 id="提交独立任务" tabindex="-1"><a class="header-anchor" href="#提交独立任务"><span>提交独立任务</span></a></h2><p>首先，鼠标左键单击<code>Create Project</code>按钮，输入项目名称和描述。</p><figure><img src="https://tianmazuo.com/technology/middleware/azkaban-02.png" alt="创建一个项目" tabindex="0" loading="lazy"><figcaption>创建一个项目</figcaption></figure><figure><img src="https://tianmazuo.com/technology/middleware/azkaban-03.png" alt="项目创建完成" tabindex="0" loading="lazy"><figcaption>项目创建完成</figcaption></figure><p>先创建一个用来测试的<code>test.job</code>。</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt; mkdir -p /home/work/azkaban</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt; cd /home/work/azkaban</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt; vi test.job</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"># test.job</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"># type为任务类型，command表示执行一条命令</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">type</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">command</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">command</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">echo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;Hello, Azkaban!&quot;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>然后将<code>test.job</code>添加到一个压缩包中去。</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt; cd /home/work/azkaban</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt; zip test.zip test.job</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>然后将这个压缩包上传到<a href="https://azkaban.github.io/" target="_blank" rel="noopener noreferrer">Azkaban</a>。</p><figure><img src="https://tianmazuo.com/technology/middleware/azkaban-04.png" alt="上传zip压缩包" tabindex="0" loading="lazy"><figcaption>上传zip压缩包</figcaption></figure><figure><img src="https://tianmazuo.com/technology/middleware/azkaban-05.png" alt="执行压缩包中的任务" tabindex="0" loading="lazy"><figcaption>执行压缩包中的任务</figcaption></figure><figure><img src="https://tianmazuo.com/technology/middleware/azkaban-06.png" alt="执行压缩包中的任务" tabindex="0" loading="lazy"><figcaption>执行压缩包中的任务</figcaption></figure><p>在接下来的界面中，继续单击<code>Continue</code>。</p><figure><img src="https://tianmazuo.com/technology/middleware/azkaban-07.png" alt="任务执行完成后查看结果" tabindex="0" loading="lazy"><figcaption>任务执行完成后查看结果</figcaption></figure><p>也可以通过单击<code>Job List</code>中的<code>Details</code>查看任务执行的明细信息。</p><p>如果想让任务定时执行，可以在执行时设置定时信息。</p><figure><img src="https://tianmazuo.com/technology/middleware/azkaban-08.png" alt="设置任务的定时执行" tabindex="0" loading="lazy"><figcaption>设置任务的定时执行</figcaption></figure><figure><img src="https://tianmazuo.com/technology/middleware/azkaban-09.png" alt="设置任务的定时执行" tabindex="0" loading="lazy"><figcaption>设置任务的定时执行</figcaption></figure><p>可以看到，界面是按照<code>crontab</code>风格显示的，并且显示了接下来的10次定时调用时间。</p><p>单击<code>Schedule</code>后，在接下的界面中继续单击<code>Continue</code>完成设置。</p><figure><img src="https://tianmazuo.com/technology/middleware/azkaban-10.png" alt="设置任务的定时执行" tabindex="0" loading="lazy"><figcaption>设置任务的定时执行</figcaption></figure><br><h2 id="提交依赖任务" tabindex="-1"><a class="header-anchor" href="#提交依赖任务"><span>提交依赖任务</span></a></h2><p>现在继续创建一个有依赖的任务。</p><p>先创建两个用来测试的任务文件，分别是<code>first.job</code>和<code>second.job</code>。</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt; cd /home/work/azkaban</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt; vi first.job</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">type</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">command</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">command</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">echo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;this is a first!&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt; vi second.job</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">type</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">command</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"># 多了dependencies选项</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">dependencies</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">first</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">command</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">echo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;this is a second!&quot;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>然后将这两个<code>job</code>添加到一个压缩包中去。</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt; cd /home/work/azkaban</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt; zip dependency.zip first.job second.job</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>接着再在<a href="https://azkaban.github.io/" target="_blank" rel="noopener noreferrer">Azkaban</a>中创建<code>dependency</code>项目（名字可以随便起）。</p><figure><img src="https://tianmazuo.com/technology/middleware/azkaban-11.png" alt="创建有依赖的定时任务" tabindex="0" loading="lazy"><figcaption>创建有依赖的定时任务</figcaption></figure><p>然后和前面一样的方式上传<code>zip</code>压缩文件，上传完成后就能看到任务之间具有明显的层级（依赖）关系。</p><figure><img src="https://tianmazuo.com/technology/middleware/azkaban-12.png" alt="具有依赖关系的定时任务" tabindex="0" loading="lazy"><figcaption>具有依赖关系的定时任务</figcaption></figure><p>单击<code>Execute Flow</code>后显示任务的依赖关系。</p><figure><img src="https://tianmazuo.com/technology/middleware/azkaban-13.png" alt="具有依赖关系的定时任务" tabindex="0" loading="lazy"><figcaption>具有依赖关系的定时任务</figcaption></figure><p>单击下面的<code>Execute</code>，然后再单击<code>Continue</code>，就可以看到执行结果。</p><figure><img src="https://tianmazuo.com/technology/middleware/azkaban-14.png" alt="任务执行结果" tabindex="0" loading="lazy"><figcaption>任务执行结果</figcaption></figure><figure><img src="https://tianmazuo.com/technology/middleware/azkaban-15.png" alt="任务执行结果" tabindex="0" loading="lazy"><figcaption>任务执行结果</figcaption></figure>`,48),l=[t];function r(o,d){return e(),i("div",null,l)}const c=a(n,[["render",r],["__file","azkaban.html.vue"]]),k=JSON.parse('{"path":"/technology/middleware/azkaban.html","title":"Azkaban","lang":"zh-CN","frontmatter":{"title":"Azkaban","icon":"hat-wizard","category":["中间件","Azkaban"],"tag":["中间件","Azkaban"],"date":"2023-04-20T00:00:00.000Z","isOriginal":true,"star":true,"description":"编译安装 Azkaban是Linkedin开源的轻量级批量任务流调度器（和它类似的还有Oozie，但它是重量级的）。 可以在这个地址https://github.com/azkaban/azkaban/tags下载它。 然后再按照官网的示例开始单机模式的编译安装。 编译完成后，会在当前目录下产生一个名称为azkaban-solo-server的目录。 ...","head":[["meta",{"property":"og:url","content":"https://vuepress-theme-hope-docs-demo.netlify.app/technology/middleware/azkaban.html"}],["meta",{"property":"og:site_name","content":"添码座"}],["meta",{"property":"og:title","content":"Azkaban"}],["meta",{"property":"og:description","content":"编译安装 Azkaban是Linkedin开源的轻量级批量任务流调度器（和它类似的还有Oozie，但它是重量级的）。 可以在这个地址https://github.com/azkaban/azkaban/tags下载它。 然后再按照官网的示例开始单机模式的编译安装。 编译完成后，会在当前目录下产生一个名称为azkaban-solo-server的目录。 ..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:image","content":"https://tianmazuo.com/technology/middleware/azkaban-01.png"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"article:author","content":"添码座"}],["meta",{"property":"article:tag","content":"中间件"}],["meta",{"property":"article:tag","content":"Azkaban"}],["meta",{"property":"article:published_time","content":"2023-04-20T00:00:00.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Azkaban\\",\\"image\\":[\\"https://tianmazuo.com/technology/middleware/azkaban-01.png\\",\\"https://tianmazuo.com/technology/middleware/azkaban-02.png\\",\\"https://tianmazuo.com/technology/middleware/azkaban-03.png\\",\\"https://tianmazuo.com/technology/middleware/azkaban-04.png\\",\\"https://tianmazuo.com/technology/middleware/azkaban-05.png\\",\\"https://tianmazuo.com/technology/middleware/azkaban-06.png\\",\\"https://tianmazuo.com/technology/middleware/azkaban-07.png\\",\\"https://tianmazuo.com/technology/middleware/azkaban-08.png\\",\\"https://tianmazuo.com/technology/middleware/azkaban-09.png\\",\\"https://tianmazuo.com/technology/middleware/azkaban-10.png\\",\\"https://tianmazuo.com/technology/middleware/azkaban-11.png\\",\\"https://tianmazuo.com/technology/middleware/azkaban-12.png\\",\\"https://tianmazuo.com/technology/middleware/azkaban-13.png\\",\\"https://tianmazuo.com/technology/middleware/azkaban-14.png\\",\\"https://tianmazuo.com/technology/middleware/azkaban-15.png\\"],\\"datePublished\\":\\"2023-04-20T00:00:00.000Z\\",\\"dateModified\\":null,\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"添码座\\",\\"url\\":\\"https://www.tianmazuo.com/about/\\"}]}"]]},"headers":[{"level":2,"title":"编译安装","slug":"编译安装","link":"#编译安装","children":[]},{"level":2,"title":"提交独立任务","slug":"提交独立任务","link":"#提交独立任务","children":[]},{"level":2,"title":"提交依赖任务","slug":"提交依赖任务","link":"#提交依赖任务","children":[]}],"git":{},"readingTime":{"minutes":2.53,"words":760},"filePathRelative":"technology/middleware/azkaban.md","localizedDate":"2023年4月20日","excerpt":"<h2>编译安装</h2>\\n<p><a href=\\"https://azkaban.github.io/\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\">Azkaban</a>是<a href=\\"https://www.linkedin.com/\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\">Linkedin</a>开源的轻量级批量任务流调度器（和它类似的还有<a href=\\"https://oozie.apache.org/\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\">Oozie</a>，但它是重量级的）。</p>","autoDesc":true}');export{c as comp,k as data};
