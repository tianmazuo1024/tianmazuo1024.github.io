import{_ as n}from"./plugin-vue_export-helper-DlAUqK2U.js";import{r as l,c as t,a as s,e as i,b as h,w as r,d as a,o as p}from"./app-B5m7CcSj.js";const k={},d=a('<h2 id="hive概述" tabindex="-1"><a class="header-anchor" href="#hive概述"><span>Hive概述</span></a></h2><ul><li><p><a href="https://hive.apache.org/" target="_blank" rel="noopener noreferrer">Hive</a>是一个建立在<a href="https://hadoop.apache.org" target="_blank" rel="noopener noreferrer">Hadoop</a>之上的<a href="https://zh.wikipedia.org/wiki/%E8%B3%87%E6%96%99%E5%80%89%E5%84%B2" target="_blank" rel="noopener noreferrer">数据仓库</a>，它提供了一系列的工具，可以实现对<code>PB级</code>数据的提取（Extract）、转化（Transform）和加载（Load），也就是<a href="https://en.wikipedia.org/wiki/Extract,_transform,_load" target="_blank" rel="noopener noreferrer">ETL</a>。</p></li><li><p><a href="https://hive.apache.org/" target="_blank" rel="noopener noreferrer">Hive</a>定义了一个简单的<code>类SQL</code>查询语言，被称为<code>HQL</code>，可以通过它来实现和<a href="https://hadoop.apache.org/docs/current/hadoop-mapreduce-client/hadoop-mapreduce-client-core/MapReduceTutorial.html" target="_blank" rel="noopener noreferrer">MapReduce</a>同样的，甚至更强的功能。</p></li><li><p><a href="https://hive.apache.org/" target="_blank" rel="noopener noreferrer">Hive</a>的数据存储是基于<a href="https://hadoop.apache.org/docs/current/hadoop-project-dist/hadoop-hdfs/HdfsDesign.html" target="_blank" rel="noopener noreferrer">HDFS</a>实现的，它没有专门的数据存储格式，所以只要<a href="https://hadoop.apache.org/docs/current/hadoop-project-dist/hadoop-hdfs/HdfsDesign.html" target="_blank" rel="noopener noreferrer">HDFS</a>支持的，它也都支持，例如<code>TextFile</code>、<code>SequenceFile</code>和<code>MapFile</code>等。</p></li></ul><figure><img src="https://tianmazuo.com/technology/bigdata/hive/hive-01.png" alt="Hive整体架构" tabindex="0" loading="lazy"><figcaption>Hive整体架构</figcaption></figure><ul><li><p><code>CLI</code>、<code>JDBC/ODBC</code>和<code>Web UI</code>都表示用户接口。</p></li><li><p><code>Metastore</code>是<a href="https://hive.apache.org/" target="_blank" rel="noopener noreferrer">Hive</a>元数据的集中存放地，它默认使用<a href="https://db.apache.org/derby/" target="_blank" rel="noopener noreferrer">Derby</a>作为内置的存储引擎，推荐使用<a href="https://www.mysql.com" target="_blank" rel="noopener noreferrer">MySQL</a>作为外置的存储引擎。</p></li><li><p><code>Driver</code>表示<a href="https://hive.apache.org/" target="_blank" rel="noopener noreferrer">Hive</a>的底层驱动，负责编译、优化和执行<code>HQL</code>查询语句，而所有的数据都保存在<a href="https://hadoop.apache.org/docs/current/hadoop-project-dist/hadoop-hdfs/HdfsDesign.html" target="_blank" rel="noopener noreferrer">HDFS</a>里，通过<a href="https://hadoop.apache.org/docs/current/hadoop-mapreduce-client/hadoop-mapreduce-client-core/MapReduceTutorial.html" target="_blank" rel="noopener noreferrer">MapReduce</a>执行计算。</p></li></ul><figure><img src="https://tianmazuo.com/technology/bigdata/hive/hive-02.png" alt="大数据计算引擎发展阶段" tabindex="0" loading="lazy"><figcaption>大数据计算引擎发展阶段</figcaption></figure><ul><li>从<a href="https://hive.apache.org/" target="_blank" rel="noopener noreferrer">Hive</a> <code>2.x</code>版本开始，官方已经不建议使用<a href="https://hadoop.apache.org/docs/current/hadoop-mapreduce-client/hadoop-mapreduce-client-core/MapReduceTutorial.html" target="_blank" rel="noopener noreferrer">MapReduce</a>引擎，而是推荐<a href="https://tez.apache.org" target="_blank" rel="noopener noreferrer">Tez</a>或<a href="https://spark.apache.org" target="_blank" rel="noopener noreferrer">Spark</a>引擎。</li></ul><br><h2 id="本机部署" tabindex="-1"><a class="header-anchor" href="#本机部署"><span>本机部署</span></a></h2>',8),o=s("a",{href:"https://hive.apache.org/",target:"_blank",rel:"noopener noreferrer"},"Hive",-1),c=s("a",{href:"https://hadoop.apache.org",target:"_blank",rel:"noopener noreferrer"},"Hadoop",-1),g=s("a",{href:"https://hadoop.apache.org",target:"_blank",rel:"noopener noreferrer"},"Hadoop",-1),B=a(`<p>先下载并解压<a href="https://dlcdn.apache.org/hive/hive-3.1.3/apache-hive-3.1.3-bin.tar.gz" target="_blank" rel="noopener noreferrer">Hive安包</a>。</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt; cd /home/work</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt; wget https://dlcdn.apache.org/hive/hive-3.1.3/apache-hive-3.1.3-bin.tar.gz</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt; tar zxf apache-hive-3.1.3-bin.tar.gz</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt; mv apache-hive-3.1.3-bin hive-3.1.3</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt; cd hive-3.1.3</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>修改<code> hive-env.sh</code>相关配置。</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt; cd conf</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt; cp hive-env.sh.template hive-env.sh</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt; vi hive-env.sh</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"># 在最下面增加几行</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">export</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> JAVA_HOME</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">usr</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">local</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">java</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">jdk1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">8</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">0_401</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">export</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> HIVE_HOME</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">home</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">work</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">hive-3</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">3</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">export</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> HADOOP_HOME</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">home</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">work</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">hadoop-3</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">2</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">0</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>修改<code>hive-site.xml</code>相关配置。</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt; cp hive-default.xml.template hive-site.xml</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt; vi hive-site.xml</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"># 增加下面的配置项</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;property&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    &lt;</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">javax.jdo.option.ConnectionURL</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;/name&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    &lt;</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">value</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">jdbc:mysql://172.16.185.176:3306/hive?serverTimezone=Asia/Shanghai</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;/value&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;/property&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;property&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    &lt;</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">javax.jdo.option.ConnectionDriverName</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;/name&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    &lt;</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">value</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">com.mysql.cj.jdbc.Driver</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;/value&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;/property&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;property&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    &lt;</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">javax.jdo.option.ConnectionUserName</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;/name&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    &lt;</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">value</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">root</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;/value&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;/property&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;property&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    &lt;</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">javax.jdo.option.ConnectionPassword</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;/name&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    &lt;</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">value</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">123456</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;/value&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;/property&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;property&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    &lt;</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">hive.querylog.location</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;/name&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    &lt;</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">value</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">/home/work/volumes/hive/querylog</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;/value&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;/property&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;property&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    &lt;</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">hive.</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">exec</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">.local.scratchdir</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;/name&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    &lt;</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">value</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">/home/work/volumes/hive/scratchdir</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;/value&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;/property&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;property&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    &lt;</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">hive.downloaded.resources.dir</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;/name&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    &lt;</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">value</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">/home/work/volumes/hive/resources</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;/value&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;/property&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>顺便将和<a href="https://www.mysql.com" target="_blank" rel="noopener noreferrer">MySQL</a>适配的驱动包拷贝到<code>\${HIVE_HOME}/lib</code>里面去。</p><p>然后在<a href="https://hadoop.apache.org" target="_blank" rel="noopener noreferrer">Hadoop</a>的<code>core-site.xml</code>文件中增加如下配置。</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt; cd /home/work/hadoop-3.2.0/etc/hadoop</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt; vi core-site.xml</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;property&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">	&lt;</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">hadoop.proxyuser.root.hosts</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;/name&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">	&lt;</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">value</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">*</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;/value&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;/property&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;property&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">	&lt;</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">hadoop.proxyuser.root.groups</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;/name&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">	&lt;</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">value</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">*</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;/value&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;/property&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>初始化<code>Metastore</code>。</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt; cd /home/work/hive-3.1.3</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt; ./bin/schematool -initSchema -dbType mysql</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>首次初始化时如果没有提前修改<code>hive-site.xml</code>中第<code>3215</code>行的代码，一定会报下面的错误，貌似这是官方的一个<code>BUG</code>。</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">......</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Caused</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> by:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> com.ctc.wstx.exc.WstxParsingException:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Illegal</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> character</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> entity:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> expansion</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> character</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (code </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">0x8</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> at</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> [row,col,system-id]: [3215,96,</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;file:/home/work/hive-3.1.3/conf/hive-site.xml&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">]</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">......</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>直接将报错的<code>3215</code>行删除就行了。</p><p>再次执行<code>Metastore</code>初始化命令成功。</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Metastore</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> connection</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> URL:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">	 jdbc:mysql://172.16.185.176:3306/hive?serverTimezone=Asia/Shanghai</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Metastore</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Connection</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Driver</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> :</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">	 com.mysql.cj.jdbc.Driver</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Metastore</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> connection</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> User:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">	 root</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Starting</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> metastore</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> schema</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> initialization</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> to</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 3.1.0</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Initialization</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> script</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> hive-schema-3.1.0.mysql.sql</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">......</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Initialization</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> script</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> completed</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">schemaTool</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> completed</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>到这一步，<a href="https://hive.apache.org/" target="_blank" rel="noopener noreferrer">Hive</a>就已经安装好了。</p>`,17);function A(v,y){const e=l("RouteLink");return p(),t("div",null,[d,s("p",null,[i("因为"),o,i("是依赖于"),c,i("的，所以要在本机先部署好"),g,i("："),h(e,{to:"/technology/bigdata/#%E6%9C%AC%E6%9C%BA%E9%83%A8%E7%BD%B2"},{default:r(()=>[i("本机部署Hadoop")]),_:1})]),B])}const u=n(k,[["render",A],["__file","index.html.vue"]]),b=JSON.parse('{"path":"/technology/bigdata/hive/","title":"Hive数据仓库","lang":"zh-CN","frontmatter":{"title":"Hive数据仓库","icon":"hippo","category":["大数据","Hive"],"tag":["大数据","Hive"],"date":"2023-03-24T00:00:00.000Z","isOriginal":true,"star":true,"description":"Hive概述 Hive是一个建立在Hadoop之上的数据仓库，它提供了一系列的工具，可以实现对PB级数据的提取（Extract）、转化（Transform）和加载（Load），也就是ETL。 Hive定义了一个简单的类SQL查询语言，被称为HQL，可以通过它来实现和MapReduce同样的，甚至更强的功能。 Hive的数据存储是基于HDFS实现的，它没...","head":[["meta",{"property":"og:url","content":"https://vuepress-theme-hope-docs-demo.netlify.app/technology/bigdata/hive/"}],["meta",{"property":"og:site_name","content":"添码座"}],["meta",{"property":"og:title","content":"Hive数据仓库"}],["meta",{"property":"og:description","content":"Hive概述 Hive是一个建立在Hadoop之上的数据仓库，它提供了一系列的工具，可以实现对PB级数据的提取（Extract）、转化（Transform）和加载（Load），也就是ETL。 Hive定义了一个简单的类SQL查询语言，被称为HQL，可以通过它来实现和MapReduce同样的，甚至更强的功能。 Hive的数据存储是基于HDFS实现的，它没..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:image","content":"https://tianmazuo.com/technology/bigdata/hive/hive-01.png"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"article:author","content":"添码座"}],["meta",{"property":"article:tag","content":"大数据"}],["meta",{"property":"article:tag","content":"Hive"}],["meta",{"property":"article:published_time","content":"2023-03-24T00:00:00.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Hive数据仓库\\",\\"image\\":[\\"https://tianmazuo.com/technology/bigdata/hive/hive-01.png\\",\\"https://tianmazuo.com/technology/bigdata/hive/hive-02.png\\"],\\"datePublished\\":\\"2023-03-24T00:00:00.000Z\\",\\"dateModified\\":null,\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"添码座\\",\\"url\\":\\"https://www.tianmazuo.com/about/\\"}]}"]]},"headers":[{"level":2,"title":"Hive概述","slug":"hive概述","link":"#hive概述","children":[]},{"level":2,"title":"本机部署","slug":"本机部署","link":"#本机部署","children":[]}],"git":{},"readingTime":{"minutes":2.64,"words":793},"filePathRelative":"technology/bigdata/hive/README.md","localizedDate":"2023年3月24日","excerpt":"<h2>Hive概述</h2>\\n<ul>\\n<li>\\n<p><a href=\\"https://hive.apache.org/\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\">Hive</a>是一个建立在<a href=\\"https://hadoop.apache.org\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\">Hadoop</a>之上的<a href=\\"https://zh.wikipedia.org/wiki/%E8%B3%87%E6%96%99%E5%80%89%E5%84%B2\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\">数据仓库</a>，它提供了一系列的工具，可以实现对<code>PB级</code>数据的提取（Extract）、转化（Transform）和加载（Load），也就是<a href=\\"https://en.wikipedia.org/wiki/Extract,_transform,_load\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\">ETL</a>。</p>\\n</li>\\n<li>\\n<p><a href=\\"https://hive.apache.org/\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\">Hive</a>定义了一个简单的<code>类SQL</code>查询语言，被称为<code>HQL</code>，可以通过它来实现和<a href=\\"https://hadoop.apache.org/docs/current/hadoop-mapreduce-client/hadoop-mapreduce-client-core/MapReduceTutorial.html\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\">MapReduce</a>同样的，甚至更强的功能。</p>\\n</li>\\n<li>\\n<p><a href=\\"https://hive.apache.org/\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\">Hive</a>的数据存储是基于<a href=\\"https://hadoop.apache.org/docs/current/hadoop-project-dist/hadoop-hdfs/HdfsDesign.html\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\">HDFS</a>实现的，它没有专门的数据存储格式，所以只要<a href=\\"https://hadoop.apache.org/docs/current/hadoop-project-dist/hadoop-hdfs/HdfsDesign.html\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\">HDFS</a>支持的，它也都支持，例如<code>TextFile</code>、<code>SequenceFile</code>和<code>MapFile</code>等。</p>\\n</li>\\n</ul>","autoDesc":true}');export{u as comp,b as data};
