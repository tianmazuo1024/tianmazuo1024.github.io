import{_ as e}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as i,o as s,d as a}from"./app-CiwSPZKD.js";const l={},n=a(`<h2 id="set命令" tabindex="-1"><a class="header-anchor" href="#set命令"><span>Set命令</span></a></h2><p>可以在<a href="https://hive.apache.org/" target="_blank" rel="noopener noreferrer">Hive</a>命令行中使用<code>set</code>命令去临时设置一些参数的值，也就是<code>hive-site.xml</code>文件中那些参数的值。</p><p>但通过这种方式设置的参数值只对当前会话有效。</p><p>也可以在脚本文件<code>~/.hiverc</code>中配置<code>set</code>命令，使得某些命令仅对当前机器的当前用户有效（<code>~/.hiverc</code>文件需要自己创建）。</p><h3 id="临时更改生效" tabindex="-1"><a class="header-anchor" href="#临时更改生效"><span>临时更改生效</span></a></h3><p>例如，在<code>hive-site.xml</code>中存在参数<code>hive.cli.print.current.db</code>，打印出当前在哪个数据库，默认为<code>false</code>，现在，将它改成<code>true</code>。</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt; cd /home/work/hive-3.1.3</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt; ./bin/hive</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">......</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">hive</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt; </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">set</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> hive.cli.print.current.db=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">true</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">hive</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (default)&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>退出当前会话在重新连接后，又会恢复成默认设置。</p><h3 id="本机用户生效" tabindex="-1"><a class="header-anchor" href="#本机用户生效"><span>本机用户生效</span></a></h3><p>创建脚本文件<code>~/.hiverc</code>。</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt; cd ~</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt; vi .hiverc</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">set</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> hive.cli.print.current.db=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">true</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>再通过命令行连接<a href="https://hive.apache.org/" target="_blank" rel="noopener noreferrer">Hive</a>。</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt; cd /home/work/hive-3.1.3</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt; ./bin/hive</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">......</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">hive</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (default)&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>会发现成功连接的时候，提示符就已经显示了当前所在的数据库。</p><br><h2 id="hive日志" tabindex="-1"><a class="header-anchor" href="#hive日志"><span>Hive日志</span></a></h2><p>每次连接<a href="https://hive.apache.org/" target="_blank" rel="noopener noreferrer">Hive</a>的时候，就会出现一大堆的日志内容，比较影响使用。</p><p>先消除掉日志冲突造成的问题。</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt; cd /home/work/hive-3.1.3/lib</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt; mv log4j-slf4j-impl-2.17.1.jar log4j-slf4j-impl-2.17.1.bak</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p><a href="https://hive.apache.org/" target="_blank" rel="noopener noreferrer">Hive</a>中的日志分为两类。</p><ul><li><p><code>运行时日志</code>，这是<a href="https://hive.apache.org/" target="_blank" rel="noopener noreferrer">Hive</a>在执行任务的计算机上生成的日志。</p></li><li><p><code>任务执行日志</code>，这是<a href="https://hive.apache.org/" target="_blank" rel="noopener noreferrer">Hive</a>将任务提交到<a href="https://hadoop.apache.org/docs/current/hadoop-yarn/hadoop-yarn-site/YARN.html" target="_blank" rel="noopener noreferrer">YARN</a>集群时，由<a href="https://hadoop.apache.org/docs/current/hadoop-yarn/hadoop-yarn-site/YARN.html" target="_blank" rel="noopener noreferrer">YARN</a>所生成的日志。</p></li></ul><p>第一种<code>运行时日志</code>可以通过修改<code>\${HIVE_HOME}/conf/hive-log4j2.properties.template</code>和<code>\${HIVE_HOME}/conf/hive-exec-log4j2.properties.template</code>来控制。</p><p>先修改<code>\${HIVE_HOME}/conf/hive-log4j2.properties.template</code>。</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt; cd /home/work/hive-3.1.3/conf</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt; mv hive-log4j2.properties.template hive-log4j2.properties</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt; vi hive-log4j2.properties</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">property.hive.log.level</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> WARN</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">property.hive.log.dir</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /home/work/volumes/hive/logs</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>再修改<code>\${HIVE_HOME}/conf/hive-exec-log4j2.properties.template</code>。</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt; cd /home/work/hive-3.1.3/conf</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt; mv hive-exec-log4j2.properties.template hive-exec-log4j2.properties</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt; vi hive-exec-log4j2.properties</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">property.hive.log.level</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> WARN</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">property.hive.log.dir</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /home/work/volumes/hive/logs</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>再通过命令行连接<a href="https://hive.apache.org/" target="_blank" rel="noopener noreferrer">Hive</a>。</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt; cd /home/work/hive-3.1.3</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt; ./bin/hive</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">......</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">hive</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (default)&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>会发现输出的日志少了很多。而在<code>/home/work/volumes/hive/logs</code>目录中则多出了<code>hive.log</code>文件。</p><p>另外，同样的道理，同一个<code>conf</code>目录下的<code>beeline-log4j2.properties.template</code>、<code>llap-cli-log4j2.properties.template</code>和<code>llap-daemon-log4j2.properties.template</code>分别是用来控制<code>beeline</code>、<code>llap-cli</code>和<code>llap-daemon</code>的日志行为的。</p>`,30),t=[n];function h(r,p){return s(),i("div",null,t)}const c=e(l,[["render",h],["__file","skill.html.vue"]]),k=JSON.parse('{"path":"/technology/bigdata/hive/skill.html","title":"一些使用技巧","lang":"zh-CN","frontmatter":{"title":"一些使用技巧","icon":"hippo","category":["大数据","Hive"],"tag":["大数据","Hive"],"date":"2023-03-30T00:00:00.000Z","isOriginal":true,"star":true,"description":"Set命令 可以在Hive命令行中使用set命令去临时设置一些参数的值，也就是hive-site.xml文件中那些参数的值。 但通过这种方式设置的参数值只对当前会话有效。 也可以在脚本文件~/.hiverc中配置set命令，使得某些命令仅对当前机器的当前用户有效（~/.hiverc文件需要自己创建）。 临时更改生效 例如，在hive-site.xml中...","head":[["meta",{"property":"og:url","content":"https://vuepress-theme-hope-docs-demo.netlify.app/technology/bigdata/hive/skill.html"}],["meta",{"property":"og:site_name","content":"添码座"}],["meta",{"property":"og:title","content":"一些使用技巧"}],["meta",{"property":"og:description","content":"Set命令 可以在Hive命令行中使用set命令去临时设置一些参数的值，也就是hive-site.xml文件中那些参数的值。 但通过这种方式设置的参数值只对当前会话有效。 也可以在脚本文件~/.hiverc中配置set命令，使得某些命令仅对当前机器的当前用户有效（~/.hiverc文件需要自己创建）。 临时更改生效 例如，在hive-site.xml中..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"article:author","content":"添码座"}],["meta",{"property":"article:tag","content":"大数据"}],["meta",{"property":"article:tag","content":"Hive"}],["meta",{"property":"article:published_time","content":"2023-03-30T00:00:00.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"一些使用技巧\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2023-03-30T00:00:00.000Z\\",\\"dateModified\\":null,\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"添码座\\",\\"url\\":\\"https://www.tianmazuo.com/about/\\"}]}"]]},"headers":[{"level":2,"title":"Set命令","slug":"set命令","link":"#set命令","children":[{"level":3,"title":"临时更改生效","slug":"临时更改生效","link":"#临时更改生效","children":[]},{"level":3,"title":"本机用户生效","slug":"本机用户生效","link":"#本机用户生效","children":[]}]},{"level":2,"title":"Hive日志","slug":"hive日志","link":"#hive日志","children":[]}],"git":{},"readingTime":{"minutes":1.88,"words":565},"filePathRelative":"technology/bigdata/hive/skill.md","localizedDate":"2023年3月30日","excerpt":"<h2>Set命令</h2>\\n<p>可以在<a href=\\"https://hive.apache.org/\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\">Hive</a>命令行中使用<code>set</code>命令去临时设置一些参数的值，也就是<code>hive-site.xml</code>文件中那些参数的值。</p>\\n<p>但通过这种方式设置的参数值只对当前会话有效。</p>\\n<p>也可以在脚本文件<code>~/.hiverc</code>中配置<code>set</code>命令，使得某些命令仅对当前机器的当前用户有效（<code>~/.hiverc</code>文件需要自己创建）。</p>","autoDesc":true}');export{c as comp,k as data};
