import{_ as s}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as i,o as a,d as n}from"./app-CiwSPZKD.js";const e={},l=n(`<p>在商品订单数仓的建设中，需要满足下面这么几项需求。</p><ul><li><p><code>用户信息宽表</code>，将服务端中的<code>t_user</code>和<code>t_user_addr</code>这两张表的字段拼接起来，形成一张宽表，便于后续查询。</p></li><li><p><code>电商GMV（Gross Merchandise Volume，商品交易总额）</code>，统计一段时间内的电商交易总金额。</p></li><li><p><code>商品</code>相关指标，包括下面两个子指标。</p><ul><li><p><code>商品销售情况</code>，需要提取出商品名称、一级类目、订单总量、销售额这几个属性。</p></li><li><p><code>商品品类偏好Top10</code>，统计出商品一级类目的订单总量，然后取前10名。</p></li></ul></li><li><p><code>漏斗转化分析</code>，就是针对用户行为逐层分析用户<code>活跃 -&gt; 商品详情页 -&gt; 下单 -&gt; 支付</code>的转化率。</p><figure><img src="https://tianmazuo.com/application/case/warehouse/warehouse-09.png" alt="用户行为漏斗分析" tabindex="0" loading="lazy"><figcaption>用户行为漏斗分析</figcaption></figure></li></ul><p>和<code>用户行为数仓</code>一样，也事先通过代码生成了<code>2024-01-01</code>~<code>2024-01-31</code>这一个月的商品订单数据，且已经上传到了<a href="https://hadoop.apache.org/docs/current/hadoop-project-dist/hadoop-hdfs/HdfsDesign.html" target="_blank" rel="noopener noreferrer">HDFS</a>中。</p><p>通过代码加载已经生成的<code>ODS层</code>数据。</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt; cd /home/work/warehouse_goods_order</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt; vi load_data_to_ods_shopmall.sh</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">#!/bin/bash</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"># 加载ods层的数据</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">for</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">((</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">i</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">i</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">&lt;=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">31</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">i</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">++</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">))</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">do</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    if</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> [ </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">$i</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> -lt</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 10</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> ]</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    then</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">        dt</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;2024010&quot;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">$i</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    else</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">        dt</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;202401&quot;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">$i</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    fi</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">    echo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;ods_shopmall_add_partition.sh&quot;</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;"> \${</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">dt</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">}</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    sh</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ods_shopmall_add_partition.sh</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;"> \${</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">dt</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">}</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">done</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>然后，再往<code>DWD层</code>中填充数据。</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt; cd /home/work/warehouse_goods_order</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt; vi load_data_to_dwd_shopmall.sh</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">#!/bin/bash</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"># 往dwd层填充数据</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">for</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">((</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">i</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">i</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">&lt;=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">31</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">i</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">++</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">))</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">do</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    if</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> [ </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">$i</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> -lt</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 10</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> ]</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">	then</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">        dt</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;2024010&quot;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">$i</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">	else</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">        dt</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;202401&quot;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">$i</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    fi</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">    echo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;dwd_shopmall_add_partition.sh&quot;</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;"> \${</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">dt</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">}</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    sh</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> dwd_shopmall_add_partition.sh</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;"> \${</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">dt</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">}</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">done</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>最后，执行这两个数据加载脚本。</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt; cd /home/work/warehouse_goods_order</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"># ods层的数据加载要先执行</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt; sh load_data_to_ods_shopmall.sh</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt; sh load_data_to_dwd_shopmall.sh</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,9),t=[l];function h(p,d){return a(),i("div",null,t)}const o=s(e,[["render",h],["__file","gorequire.html.vue"]]),c=JSON.parse('{"path":"/application/case/warehouse/gorequire.html","title":"商品订单数仓需求","lang":"zh-CN","frontmatter":{"title":"商品订单数仓需求","icon":"user-tag","category":["案例","数据仓库"],"tag":["案例","数据仓库","商品订单"],"date":"2024-06-03T00:00:00.000Z","isOriginal":true,"star":true,"description":"在商品订单数仓的建设中，需要满足下面这么几项需求。 用户信息宽表，将服务端中的t_user和t_user_addr这两张表的字段拼接起来，形成一张宽表，便于后续查询。 电商GMV（Gross Merchandise Volume，商品交易总额），统计一段时间内的电商交易总金额。 商品相关指标，包括下面两个子指标。 商品销售情况，需要提取出商品名称、一级...","head":[["meta",{"property":"og:url","content":"https://vuepress-theme-hope-docs-demo.netlify.app/application/case/warehouse/gorequire.html"}],["meta",{"property":"og:site_name","content":"添码座"}],["meta",{"property":"og:title","content":"商品订单数仓需求"}],["meta",{"property":"og:description","content":"在商品订单数仓的建设中，需要满足下面这么几项需求。 用户信息宽表，将服务端中的t_user和t_user_addr这两张表的字段拼接起来，形成一张宽表，便于后续查询。 电商GMV（Gross Merchandise Volume，商品交易总额），统计一段时间内的电商交易总金额。 商品相关指标，包括下面两个子指标。 商品销售情况，需要提取出商品名称、一级..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:image","content":"https://tianmazuo.com/application/case/warehouse/warehouse-09.png"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"article:author","content":"添码座"}],["meta",{"property":"article:tag","content":"案例"}],["meta",{"property":"article:tag","content":"数据仓库"}],["meta",{"property":"article:tag","content":"商品订单"}],["meta",{"property":"article:published_time","content":"2024-06-03T00:00:00.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"商品订单数仓需求\\",\\"image\\":[\\"https://tianmazuo.com/application/case/warehouse/warehouse-09.png\\"],\\"datePublished\\":\\"2024-06-03T00:00:00.000Z\\",\\"dateModified\\":null,\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"添码座\\",\\"url\\":\\"https://www.tianmazuo.com/about/\\"}]}"]]},"headers":[],"git":{},"readingTime":{"minutes":1.44,"words":432},"filePathRelative":"application/case/warehouse/gorequire.md","localizedDate":"2024年6月3日","excerpt":"<p>在商品订单数仓的建设中，需要满足下面这么几项需求。</p>\\n<ul>\\n<li>\\n<p><code>用户信息宽表</code>，将服务端中的<code>t_user</code>和<code>t_user_addr</code>这两张表的字段拼接起来，形成一张宽表，便于后续查询。</p>\\n</li>\\n<li>\\n<p><code>电商GMV（Gross Merchandise Volume，商品交易总额）</code>，统计一段时间内的电商交易总金额。</p>\\n</li>\\n<li>\\n<p><code>商品</code>相关指标，包括下面两个子指标。</p>\\n<ul>\\n<li>\\n<p><code>商品销售情况</code>，需要提取出商品名称、一级类目、订单总量、销售额这几个属性。</p>\\n</li>\\n<li>\\n<p><code>商品品类偏好Top10</code>，统计出商品一级类目的订单总量，然后取前10名。</p>\\n</li>\\n</ul>\\n</li>\\n<li>\\n<p><code>漏斗转化分析</code>，就是针对用户行为逐层分析用户<code>活跃 -&gt; 商品详情页 -&gt; 下单 -&gt; 支付</code>的转化率。</p>\\n<figure><img src=\\"https://tianmazuo.com/application/case/warehouse/warehouse-09.png\\" alt=\\"用户行为漏斗分析\\" tabindex=\\"0\\" loading=\\"lazy\\"><figcaption>用户行为漏斗分析</figcaption></figure>\\n</li>\\n</ul>","autoDesc":true}');export{o as comp,c as data};
